<html>
<head>
	<link href="css/models.css" rel="stylesheet">
</head>
<body>
	<select id="model-select" onchange="selectModel(this.value);">
	</select>

	<div id="models-container">
	</div>


	<script src="gamedata.json"></script>

	<script src="js/vue.js"></script>
	<script src="js/vue-3d-model.min.js"></script>
	<script>
		function startVue(id) {
			vue = new Vue({
				el: '#' + id,
				data: {
					bgColor: '#ff0',
					bgAlpha: 0.5,
					lights:[{
						type : "directional",
						name : "directional" ,
						castShadow: true,
						matrix: [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 3, 10, 3, 1],
						intensity: 0.75
					},
					{
						type: "ambient",
						name: "ambient",
						castShadow: true,
						matrix: [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 3, 10, 3, 1],
						intensity: 3
					}
					]},
					scale: {x:0.1, y:0.1, z:0.1}	
				}
			)
		}

		function selectModel(model) {
			console.log("Selected " + model);
			document.getElementById('model-' + currentModel).style.visibility = "hidden";
			document.getElementById('model-' + model).style.visibility = "visible";
			currentModel = model;
		}


		function addModel(id, obj, mtl) {
			/* Add model HTML */
			content = '';
			content += '<div id="model-' + id +'" class="model" style="visibility: hidden;">';
			content += '<model-obj style="width: 100%; height:100%; margin: auto;"';
			content += 'id="in-model-' + id + '"';
			content += ':lights="lights"';
			content += 'src="' + obj + '"';
			content += 'mtl="' + mtl + '"';
                        content += '></model-obj></div>';
			document.getElementById('models-container').innerHTML += content;

			/* Add option to select element */
			/*
			option = '';
			option += '<option value="' + id + '">' + id + '</option>';
			document.getElementById('model-select').innerHTML += option;
			*/
	
			//document.getElementById('model-' + currentModel).style.visibility = "hidden";
			//currentModel = id;
		}


		/* Variables */
		 
		for (var i = 0; i < gameData.clues.length; i++) {
			addModel(
				gameData.clues[i].id,
				gameData.clues[i].obj,
				gameData.clues[i].mtl
			);
		}


		currentModel = null;

		window.onload = function () {
			for (var i = 0; i < gameData.clues.length; i++) {
				startVue('model-' + gameData.clues[i].id);
			}
		}
</script>
</body>
</html>
